<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Many Clickable Points on a Leaflet Map With Leaflet.glify | 123k.pl</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Problem
As seen in the post before
we collected some 12.000 points which we want to display on a leaflet map.
Every attempt to put that many points on one map failed. Firefox completely stopped working, chrome did
a  little bit better and stayed responsive, but that was not a solution at all.
Solution
I pretty much tried everything L.geoJSON layer with points and polygons.
Where polygons would have been a solution maybe, but you can not tell leaflet to just draw the corners of the polygons.
So I needed something else. In the #leaflet on freenode i was pointed to the
Leaflet.glify project.">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.efe4d852f731d5d1fbb87718387202a97aafd768cdcdaed0662bbe6982e91824.css" >




    


    
      

    

    

    
      <link rel="canonical" href="https://123k.pl/post/many-clickable-points-on-a-leaflet-map-with-leaflet-glify/">
    

    <meta property="og:url" content="https://123k.pl/post/many-clickable-points-on-a-leaflet-map-with-leaflet-glify/">
  <meta property="og:site_name" content="123k.pl">
  <meta property="og:title" content="Many Clickable Points on a Leaflet Map With Leaflet.glify">
  <meta property="og:description" content="Problem As seen in the post before we collected some 12.000 points which we want to display on a leaflet map. Every attempt to put that many points on one map failed. Firefox completely stopped working, chrome did a little bit better and stayed responsive, but that was not a solution at all.
Solution I pretty much tried everything L.geoJSON layer with points and polygons. Where polygons would have been a solution maybe, but you can not tell leaflet to just draw the corners of the polygons. So I needed something else. In the #leaflet on freenode i was pointed to the Leaflet.glify project.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2016-01-07T09:29:50+01:00">
    <meta property="article:modified_time" content="2016-01-07T09:29:50+01:00">

  <meta itemprop="name" content="Many Clickable Points on a Leaflet Map With Leaflet.glify">
  <meta itemprop="description" content="Problem As seen in the post before we collected some 12.000 points which we want to display on a leaflet map. Every attempt to put that many points on one map failed. Firefox completely stopped working, chrome did a little bit better and stayed responsive, but that was not a solution at all.
Solution I pretty much tried everything L.geoJSON layer with points and polygons. Where polygons would have been a solution maybe, but you can not tell leaflet to just draw the corners of the polygons. So I needed something else. In the #leaflet on freenode i was pointed to the Leaflet.glify project.">
  <meta itemprop="datePublished" content="2016-01-07T09:29:50+01:00">
  <meta itemprop="dateModified" content="2016-01-07T09:29:50+01:00">
  <meta itemprop="wordCount" content="246">
  <meta itemprop="keywords" content="Leaflet">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Many Clickable Points on a Leaflet Map With Leaflet.glify">
  <meta name="twitter:description" content="Problem As seen in the post before we collected some 12.000 points which we want to display on a leaflet map. Every attempt to put that many points on one map failed. Firefox completely stopped working, chrome did a little bit better and stayed responsive, but that was not a solution at all.
Solution I pretty much tried everything L.geoJSON layer with points and polygons. Where polygons would have been a solution maybe, but you can not tell leaflet to just draw the corners of the polygons. So I needed something else. In the #leaflet on freenode i was pointed to the Leaflet.glify project.">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    
   
  

  <header>
    <div class="bg-dark-gray">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        123k.pl
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/post/" title="Posts page">
              Posts
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Many Clickable Points on a Leaflet Map With Leaflet.glify</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2016-01-07T09:29:50+01:00">January 7, 2016</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="problem">Problem</h1>
<p>As seen in the <a href="https://123k.pl/post/build-a-coverage-map-with-mongodb/">post before</a>
we collected some 12.000 points which we want to display on a leaflet map.
Every attempt to put that many points on one map failed. Firefox completely stopped working, chrome did
a  little bit better and stayed responsive, but that was not a solution at all.</p>
<h1 id="solution">Solution</h1>
<p>I pretty much tried everything <code>L.geoJSON</code> layer with points and polygons.
Where polygons would have been a solution maybe, but you can not tell leaflet to just draw the corners of the polygons.
So I needed something else. In the <code>#leaflet</code> on freenode i was pointed to the
<a href="http://robertleeplummerjr.github.io/Leaflet.glify/">Leaflet.glify</a> project.</p>
<p>As I understood, there is a leaflet layer which provides a HTML5 canvas. The location of the points on the canvas is
calculated based on the GPS coordinates (points2pixel) and then are rendered on the canvas with some WebGL point shapes.</p>
<p>So far so good. The best part is, that the lib holds an index about every rendered point and so can respond to clicks.
As it is not easy to really hit a special point there is even a &lsquo;find nearest point&rsquo; algorithm in place so that you almost
always get a point clicked.</p>
<p>The actual code to use the plugin is a one-liner.</p>
<script src="https://gist.github.com/efwe/683e7db0c4c22f5a52d4.js?file=add_coverage.coffee"></script>


<p>Here&rsquo;s the callback I use when a point is clicked. Interesting detail. You should call <code>L.DomEvent.stopPropagation(event)</code> to
stop the event handling if you have other click-backs registered on your map.</p>
<script src="https://gist.github.com/efwe/28c03b9c10c15cfda165.js?file=point_clicked.coffee"></script>


<p>You can see the result at <a href="https://123k.org/coverage">https://123k.org/coverage</a>.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-dark-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://123k.pl/" >
    &copy;  123k.pl 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
